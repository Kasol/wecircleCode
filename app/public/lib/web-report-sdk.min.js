!function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e){e=e||10;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz123456789",r=t.length,n="",o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*r));return n+(new Date).getTime()}function r(e,u){try{function c(e){var h=0<arguments.length&&void 0!==e?e:1;setTimeout(function(){p.isPage&&l(),(p.isResource||p.isAjax)&&f(),ERRORLIST&&ERRORLIST.length&&(g.errorList=g.errorList.concat(ERRORLIST));var e,t,r,n,o,a,i=document.documentElement.clientWidth||document.body.clientWidth,s=document.documentElement.clientHeight||document.body.clientHeight,c=(e=sessionStorage.getItem("ps_markUser")||"",t={markUser:e,isFristIn:!1},e||(e=y(),sessionStorage.setItem("ps_markUser",e),t.markUser=e,t.isFristIn=!0),t),d={time:(new Date).getTime(),addData:ADDDATA,markUser:c.markUser,markUv:(r=new Date,n=localStorage.getItem("ps_markUv")||"",o=localStorage.getItem("ps_markUvTime")||"",a=r.getFullYear()+"/"+(r.getMonth()+1)+"/"+r.getDate()+" 23:59:59",(!n&&!o||r.getTime()>+o)&&(n=y(),localStorage.setItem("ps_markUv",n),localStorage.setItem("ps_markUvTime",new Date(a).getTime())),n),type:h,url:location.href};!function(){var e=g.resourceList,t=p.filterUrl,r=[];if(e&&e.length&&t&&t.length)for(var n=0;n<e.length;n++){for(var o=!1,a=0;a<t.length;a++)if(-1<e[n].name.indexOf(t[a])){o=!0;break}o||r.push(e[n])}g.resourceList=r}(),1===h?d=Object.assign(d,{preUrl:g.preUrl,errorList:g.errorList,performance:g.performance,resourceList:g.resourceList,isFristIn:c.isFristIn,screenwidth:i,screenheight:s}):2===h?d=Object.assign(d,{resourceList:g.resourceList,errorList:g.errorList}):3===h&&(d=Object.assign(d,{errorList:g.errorList,resourceList:g.resourceList})),d=Object.assign(d,p.add),u&&u(d),!u&&window.fetch&&fetch(p.domain,{method:"POST",headers:{"Content-Type":"application/json"},type:"report-data",body:JSON.stringify(d)}),Promise.resolve().then(function(){m()})},p.outtime)}function t(){g.page!==location.href?g.haveAjax&&g.haveFetch&&i&&s&&h?("loadTime:".concat(i,",ajaxTime:").concat(s,",fetchTime:").concat(h),c(1)):g.haveAjax&&!g.haveFetch&&i&&s?("loadTime:".concat(i,",ajaxTime:").concat(s),c(1)):!g.haveAjax&&g.haveFetch&&i&&h?("loadTime:".concat(i,",fetchTime:").concat(h),c(1)):g.haveAjax||g.haveFetch||!i||("loadTime:".concat(i),c(1)):g.haveAjax&&g.haveFetch&&s&&h?("ajaxTime:".concat(s,",fetchTime:").concat(h),c(2)):g.haveAjax&&!g.haveFetch&&s?("ajaxTime:".concat(s),c(2)):!g.haveAjax&&g.haveFetch&&h&&("fetchTime:".concat(h),c(2))}function r(e){var t=Object.assign({},d);t.t=(new Date).getTime(),t.n="ajax",t.msg=e.statusText||"ajax request error",t.method=e.method,t.data={resourceUrl:e.responseURL,text:e.statusText,status:e.status},g.errorList.push(t)}function n(){g.loadNum+=1,g.loadNum===g.ajaxLength&&(g.ajaxLength=g.loadNum=0,s=(new Date).getTime()-a,t())}var l=function(){var e;window.performance&&(e=performance.timing,g.performance={dnst:e.domainLookupEnd-e.domainLookupStart||0,tcpt:e.connectEnd-e.connectStart||0,wit:e.responseStart-e.navigationStart||0,domt:e.domContentLoadedEventEnd-e.navigationStart||0,lodt:e.loadEventEnd-e.navigationStart||0,radt:e.fetchStart-e.navigationStart||0,rdit:e.redirectEnd-e.redirectStart||0,uodt:e.unloadEventEnd-e.unloadEventStart||0,reqt:e.responseEnd-e.requestStart||0,andt:e.domComplete-e.domInteractive||0})},f=function(){if(!window.performance||!window.performance.getEntries)return!1;var e=performance.getEntriesByType("resource"),o=[];if(!e&&!e.length)return o;e.forEach(function(e){var t,r,n;(p.isAjax||"xmlhttprequest"!=e.initiatorType&&"fetchrequest"!=e.initiatorType)&&(!p.isResource&&"xmlhttprequest"!=e.initiatorType&&"fetchrequest"!==e.initiatorType||(t={name:e.name,method:"GET",type:e.initiatorType,duration:e.duration.toFixed(2)||0,decodedBodySize:e.decodedBodySize||0,nextHopProtocol:e.nextHopProtocol},r=e.name?e.name.split("?")[0]:"",(n=g.ajaxMsg[r]||"")&&(t.method=n.method||"GET",t.type=n.type||t.type,t.decodedBodySize=t.decodedBodySize||n.decodedBodySize),o.push(t)))}),g.resourceList=o},o=function(){window.performance&&window.performance.clearResourceTimings&&(g.haveAjax&&g.haveFetch&&0==g.ajaxLength&&0==g.fetLength||!g.haveAjax&&g.haveFetch&&0==g.fetLength||g.haveAjax&&!g.haveFetch&&0==g.ajaxLength)&&m(1)},m=function(e){var t=0<arguments.length&&void 0!==e?e:0;window.performance&&window.performance.clearResourceTimings&&performance.clearResourceTimings(),g.performance={},g.errorList=[],g.preUrl="",g.resourceList=[],g.page=0===t?location.href:"",g.haveAjax=!1,g.haveFetch=!1,g.ajaxMsg={},ERRORLIST=[],ADDDATA={},h=s=0},p={domain:"http://localhost/api",outtime:300,filterUrl:[],isPage:!0,isAjax:!0,isResource:!0,isError:!0,add:{}};(p=Object.assign(p,e)).filterUrl=p.filterUrl.concat(["/api/v1/report/web","livereload.js?snipver=1","/sockjs-node/","/socket"]);var g={resourceList:[],performance:{},errorList:[],fetchNum:0,loadNum:0,ajaxLength:0,fetLength:0,ajaxMsg:{},goingType:"",haveAjax:!1,haveFetch:!1,preUrl:document.referrer&&document.referrer!==location.href?document.referrer:"",page:""},d={t:"",n:"js",msg:"",data:{}},a=(new Date).getTime(),i=0,s=0,h=0;p.isError&&(window.onerror=function(e,t,r,n,o){var a=Object.assign({},d);setTimeout(function(){n=n||window.event&&window.event.errorCharacter||0,a.msg=o&&o.stack?o.stack.toString():e,a.method="GET",a.data={resourceUrl:t,line:r,col:n},a.t=(new Date).getTime(),g.errorList.push(a),g.page!==location.href||g.haveAjax||c(3)},0)},window.addEventListener("unhandledrejection",function(e){var t,r,n,o=e&&e.reason,a=o.message||"",i=(o.stack||"").match(/\(.+?\)/);i&&i.length&&(i=i[0]),(i=(i=i.replace(/\w.+[js|html]/g,function(e){return t=e,""})).split(":"))&&1<i.length&&(n=parseInt(i[1]||0)),r=parseInt(i[2]||0);var s=Object.assign({},d);s.msg=a,s.method="GET",s.t=(new Date).getTime(),s.data={resourceUrl:t,line:r,col:n},g.errorList.push(s),g.page!==location.href||g.haveAjax||c(3)})),addEventListener("load",function(){i=(new Date).getTime()-a,t()},!1),(p.isAjax||p.isError)&&(v={onreadystatechange:function(t){4===t.readyState&&setTimeout(function(){if("load"!==g.goingType){g.goingType="readychange";var e=t.xhr.responseURL?t.xhr.responseURL.split("?")[0]:"";if(g.ajaxMsg[e]){try{t.xhr.response instanceof Blob?g.ajaxMsg[e].decodedBodySize=t.xhr.response.size:g.ajaxMsg[e].decodedBodySize=t.xhr.responseText.length}catch(e){}n()}(t.status<200||300<t.status)&&(t.method=t.args.method,r(t))}},600)},onerror:function(e){e.args&&(e.method=e.args.method,e.responseURL=e.args.url,e.statusText="ajax request error",g.ajaxMsg[e.responseURL]&&n()),r(e)},onload:function(e){if(4===e.readyState){if("readychange"===g.goingType)return;g.goingType="load";var t=e.xhr.responseURL?e.xhr.responseURL.split("?")[0]:"";if(g.ajaxMsg[t]){try{e.xhr.response instanceof Blob?g.ajaxMsg[t].decodedBodySize=e.xhr.response.size:g.ajaxMsg[t].decodedBodySize=e.xhr.responseText.length}catch(e){}n()}(e.status<200||300<e.status)&&(e.method=e.args.method,r(e))}},open:function(t){if(p.filterUrl&&p.filterUrl.length){var r=!1;if(p.filterUrl.forEach(function(e){-1!=t[1].indexOf(e)&&(r=!0)}),r)return}t[1]&&!/^htt(p|ps)\:\/\//.test(t[1])&&(t[1]=window.location.origin+t[1]);var e={url:t[1].split("?")[0],method:t[0]||"GET",type:"xmlhttprequest"};this.args=e,o(),g.ajaxMsg[e.url]=e,g.ajaxLength=g.ajaxLength+1,g.haveAjax=!0}},window._ahrealxhr=window._ahrealxhr||XMLHttpRequest,XMLHttpRequest=function(){for(var e in this.xhr=new window._ahrealxhr,this.xhr){var t="";try{t=x(this.xhr[e])}catch(e){}"function"===t?this[e]=function(t){return function(){var e=[].slice.call(arguments);if(!v[t]||!v[t].call(this,e,this.xhr))return this.xhr[t].apply(this.xhr,e)}}(e):Object.defineProperty(this,e,{get:function(r){return function(){var e=this.hasOwnProperty(r+"_")?this[r+"_"]:this.xhr[r],t=(v[r]||{}).getter;return t&&t(e,this)||e}}(e),set:function(a){return function(t){var e=this.xhr,r=this,n=v[a];if("function"==typeof n)e[a]=function(){v[a](r)||t.apply(e,arguments)};else{var o=(n||{}).setter;t=o&&o(t,r)||t;try{e[a]=t}catch(e){this[a+"_"]=t}}}}(e)})}},window._ahrealxhr)}catch(e){}var v}window.ERRORLIST=[],window.ADDDATA={},r.addError=function(e){e={method:"GET",msg:e.msg,n:"js",data:{col:e.col,line:e.line,resourceUrl:e.resourceUrl}},ERRORLIST.push(e)},r.addData=function(e){e&&e(ADDDATA)},window.webReportSdk=r}]);